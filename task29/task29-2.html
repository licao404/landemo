<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="../bootstrap-3.3.5-dist/css/bootstrap.min.css">
<title>图片懒加载</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style type="text/css">
	body{
		background-color: #eee;
	}
	html,body,ul{
		margin: 0;
		padding: 0;
	}
	li{
		list-style:none;
	}
	.wrap li{
		margin: 10px 0;
		padding:0 10px;
	}
	.wrap li img{
		width:100%;
		height: 230px;
	}
</style>
</head>
<body>
<div class="container">
	<ul class="wrap row">
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/20150527230039_yakTM.jpeg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/137.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/dcc451da81cb39db0d264d14d0160924aa183089.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/34.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/dcc451da81cb39db0d264d14d0160924aa183089.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/20150527230039_yakTM.jpeg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/137.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/20150527230039_yakTM.jpeg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/34.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/34.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/34.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/dcc451da81cb39db0d264d14d0160924aa183089.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/dcc451da81cb39db0d264d14d0160924aa183089.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/34.jpg" /></a></li>
		<li class="col-xs-12 col-sm-6 col-lg-4 "><a href="#"><img class="img-responsive" src="img/96280db4c9cfb910db3e398f38f10a8e.gif" data-src="img/large_jDuW_3ca700000b8e1211.jpg" /></a></li>
	</ul>	
</div>

    <script type="text/javascript" src="js/jquery-2.2.3.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/backtop.js"></script>
 	<script type="text/javascript">
		$(document).backtop();//调用backtop插件

		checkAppeared ();//打开页面加载可视范围内的图片
		
	    var clock;//设置延时，提高性能
	    $(window).on('scroll',function () {
	    	if (clock) {
	    		clearTimeout(clock);
	    	}
	    	clock = setTimeout(function () {
	    		checkAppeared();
			    // var result = isVisiable ($target);

			    // if(result){
			    // 	// console.log(result);
			    // 	$target.data('isAppeared',true);
			    // };    		  
	    	},300);
	    });

	    //判断图片是否出现在可视区域内
	    function isVisiable ($node) {
		      var scrollT = $(window).scrollTop(),//获取页面顶部到窗口顶部的滚动距离
		          windowH = $(window).height(),//获取浏览器窗口高度
		          offsetT = $node.offset().top;//获取该元素距页面顶部的距离
		      // if ($target.data('isAppeared')) {
		      // 	return;
		      // }

		      if (scrollT+windowH > offsetT) {
		        return true;
		      }else{
		        return false;
		      }
	    }

	    //检查图片是否已加载
	    function checkAppeared () {
	    	 $('.wrap img').each(function () {
	    	 	 var $this = $(this) ;
	    	 	 if($this.data('isAppeared')){
	    	 	 	return;
	    	 	 }

	    	 var result = isVisiable ($this);
	    	 if (result) {
	    	 	loadImg($this);
	    	 }
	    	 });
	    }

	    function loadImg ($node) {
	    	 $node.attr('src',$node.attr('data-src')) ;
	    	 $node.data('isAppeared',true);
	    }
	</script>
</body>
</html>

